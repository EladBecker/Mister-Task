(this["webpackJsonpmister-task"]=this["webpackJsonpmister-task"]||[]).push([[0],{126:function(e,t){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),o=a(27),u=a(66),i=a(19),l=a(20),p=a(22),m=a(21),d=a(3),f=(a(79),a(2)),v=a.n(f),k=a(6),h=a(63),b=a.n(h).a.create({withCredentials:!0}),E=function(e,t){return g(e,"GET",t)},O=function(e,t){return g(e,"POST",t)},w=function(e,t){return g(e,"PUT",t)},T=function(e,t){return g(e,"DELETE",t)};function g(e){return j.apply(this,arguments)}function j(){return(j=Object(k.a)(v.a.mark((function e(t){var a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2?c[2]:void 0,e.prev=2,e.next=5,b({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={add:function(e){return y.apply(this,arguments)},query:function(e){return x.apply(this,arguments)},update:function(e){return N.apply(this,arguments)},remove:function(e){return _.apply(this,arguments)},start:function(e){return A.apply(this,arguments)}};function y(){return(y=Object(k.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("task",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("task");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("task/".concat(t._id),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("task/".concat(t._id,"/start"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(k.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("task/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D,R=a(64),C=a.n(R),I={setup:function(){D=C()("/")},terminate:function(){D=null},on:function(e,t){D.on(e,t)},off:function(e,t){D.off(e,t)},emit:function(e,t){D.emit(e,t)}};var U=a(142),z=a(143),K=a(144),L=a(145),M=a(146),P=a(147),V=a(148),W=a(149),J=a(150),q=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.task,a=e.onRemoveTask,n=e.onStartTask;return r.a.createElement("div",{className:"task-container"},r.a.createElement("div",{className:"task-details"},r.a.createElement("h2",null,r.a.createElement(U.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},t.title)),r.a.createElement("p",{className:"task-code"},"code: ".concat(t._id)),r.a.createElement("div",{className:"description-container"},r.a.createElement(z.a,{fontSize:"small"}),r.a.createElement("div",{className:"description"},r.a.createElement("span",{className:"sub-section"},"Description:"),r.a.createElement("textarea",{defaultValue:t.description}))),r.a.createElement("div",{className:"importance"},r.a.createElement(K.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},"Importance:"),t.importance),r.a.createElement("div",{className:"created-at"},r.a.createElement(L.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},"Created At:"),new Date(t.createdAt).toLocaleString()),r.a.createElement("div",{className:"tries-count"},r.a.createElement(M.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},"Tries Counter:"),t.triesCount),r.a.createElement("div",{className:"last-tried-at"},r.a.createElement(P.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},"Last Tried At:"),new Date(t.lastTriedAt).toLocaleString()),r.a.createElement("div",{className:"done-at"},r.a.createElement(V.a,{fontSize:"small"}),r.a.createElement("span",{className:"sub-section"},"Done At:"),r.a.createElement("span",{className:t.doneAt?"done":"not-done"},t.doneAt?new Date(t.doneAt).toLocaleString():"Not Done Yet..."))),r.a.createElement("div",{className:"task-actions"},r.a.createElement("button",{className:"btn-cancel",onClick:function(){return a(t._id)}},r.a.createElement(W.a,{fontSize:"small"})," ","Delete"),r.a.createElement("button",{className:"btn-approve",disabled:t.doneAt,onClick:function(){return n(t)}},r.a.createElement(J.a,{fontSize:"small"})," ","Start")))}}]),a}(n.Component),B=a(151);function X(e){var t=e.onAddTask;return r.a.createElement("div",{className:"add-task-container"},r.a.createElement("form",{onSubmit:function(e){return t(e)}},r.a.createElement("button",{className:"btn-approve"},r.a.createElement(B.a,{fontSize:"small"})),r.a.createElement("input",{type:"text",name:"title",placeholder:"What needs to be done?"}),r.a.createElement("select",{name:"importance"},r.a.createElement("optgroup",{label:"Importance"},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3")))))}var G=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onAddTask=function(){var t=Object(k.a)(v.a.mark((function t(a){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=a.target.title.value,r=a.target.importance.value,a.target.title.value="",a.target.importance.value=1,c={title:n,description:"",importance:r,createdAt:Date.now(),triesCount:0,lastTriedAt:null,doneAt:null},t.next=8,e.props.addTask(c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStartTask=function(){var t=Object(k.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.startTask(a);case 2:return t.next=4,e.props.loadTasks();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTask=function(){var t=Object(k.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeTask(a);case 2:return t.next=4,e.props.loadTasks();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(v.a.mark((function e(){var t=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.setup(),e.prev=1,e.next=4,this.props.loadTasks();case 4:I.emit("entered-task-manager","hello"),I.on("task-updated",(function(e){return t.props.updateTask(e)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Oops! we seem to be missing the board you're looking for. going back to board selection.");case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){I.off("task-updated"),I.terminate()}},{key:"render",value:function(){var e=this,t=this.props.tasks;return t&&0!==t.length?r.a.createElement("div",{className:"task-manager"},r.a.createElement("h1",null,"Tasks"),r.a.createElement(X,{onAddTask:this.onAddTask}),r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement(q,{task:t,onRemoveTask:e.onRemoveTask,onStartTask:e.onStartTask}))})))):r.a.createElement("div",{className:"loading"},"Loading")}}]),a}(n.Component),H={addTask:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.add(e);case 3:n=t.sent,a({type:"ADD_TASK",addedTask:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error: couldn't add task",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateTask:function(e){return function(t){try{t({type:"UPDATE_TASK",task:e})}catch(a){console.log("error: couldn't update task ".concat(e._id),a)}}},removeTask:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.remove(e);case 3:a({type:"REMOVE_TASK",taskId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("error: couldn't remove task ".concat(e),t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadTasks:function(){return function(){var e=Object(k.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.query();case 3:a=e.sent,t({type:"SET_TASKS",tasks:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("error: couldn't get tasks",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},startTask:function(e){return function(){var t=Object(k.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.start(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("error: couldn't update task ".concat(e._id),t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},Y=Object(o.b)((function(e){return{tasks:e.taskReducer.tasks}}),H)(G),$=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"app-main"},r.a.createElement(d.c,null,r.a.createElement(d.a,{component:Y,path:"/"}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(16),Q=a(65),Z=a(67),ee=a(8),te={tasks:[]},ae={loggedInUser:sessionStorage.user?JSON.parse(sessionStorage.user):null,users:[]},ne=Object(F.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":var a=t.loggedInUser;return Object(ee.a)(Object(ee.a)({},e),{},{loggedInUser:a});case"USER_REMOVE":return Object(ee.a)(Object(ee.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(ee.a)(Object(ee.a)({},e),{},{users:t.users});default:return e}},taskReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":return Object(ee.a)(Object(ee.a)({},e),{},{tasks:t.tasks});case"ADD_TASK":return Object(ee.a)(Object(ee.a)({},e),{},{tasks:[t.addedTask].concat(Object(Z.a)(e.tasks))});case"UPDATE_TASK":return Object(ee.a)(Object(ee.a)({},e),{},{tasks:e.tasks.map((function(e){return e._id===t.task._id&&(e=t.task),e}))});case"REMOVE_TASK":return Object(ee.a)(Object(ee.a)({},e),{},{tasks:e.tasks.filter((function(e){return e._id!==t.taskId}))});default:return e}}}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,ce=Object(F.e)(ne,re(Object(F.a)(Q.a)));s.a.render(r.a.createElement(o.a,{store:ce},r.a.createElement(u.a,null,r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=a(130)},79:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.7acb2f0d.chunk.js.map